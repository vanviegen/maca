#!/bin/sh

VENV="$HOME/.cache/code-map-venv-1"

if [ ! -d "$VENV" ] ; then
  python3 -m venv "$VENV"
  "$VENV/bin/pip" install tree-sitter \
    tree-sitter-python \
    tree-sitter-javascript \
    tree-sitter-typescript \
    tree-sitter-go \
    tree-sitter-rust \
    tree-sitter-java \
    tree-sitter-c \
    tree-sitter-cpp \
    tree-sitter-ruby
fi

# Get the directory where this script is located
SCRIPT_DIR="$(cd "$(dirname "$0")" && pwd)"

"$VENV/bin/python" "$SCRIPT_DIR/code_map.py" "$@"
